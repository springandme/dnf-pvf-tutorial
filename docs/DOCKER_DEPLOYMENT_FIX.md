# ğŸ³ Docker éƒ¨ç½²æ ·å¼ä¸¢å¤±é—®é¢˜ä¿®å¤æŒ‡å—

## ğŸ” é—®é¢˜åˆ†æ

### **é—®é¢˜ç°è±¡**
- æœ¬åœ°éƒ¨ç½²ï¼šâœ… æ ·å¼å’ŒåŠŸèƒ½æ­£å¸¸
- Docker éƒ¨ç½²ï¼šâŒ æ ·å¼ä¸¢å¤±ï¼Œæ–‡ä»¶æ ‘å±‚çº§ä¸æ¸…æ™°

### **æ ¹æœ¬åŸå› **
1. **ç‰ˆæœ¬ä¸åŒ¹é…**ï¼šGitHub Actions ä¸­ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬æ ‡ç­¾ `0.0.1`
2. **ç¼“å­˜é—®é¢˜**ï¼šDocker Hub å¯èƒ½ç¼“å­˜äº†æ—§ç‰ˆæœ¬çš„é•œåƒ
3. **æ„å»ºæ—¶æœº**ï¼šé•œåƒæ„å»ºæ—¶å¯èƒ½æ²¡æœ‰åŒ…å«æœ€æ–°çš„ä»£ç æ›´æ”¹

---

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### **1. æ›´æ–° GitHub Actions é…ç½®**

#### ä¿®å¤ç‰ˆæœ¬æ ‡ç­¾
```yaml
# ä¿®æ”¹å‰
type=raw,value=0.0.1,enable={{is_default_branch}}

# ä¿®æ”¹å  
type=raw,value=0.1.0,enable={{is_default_branch}}
```

#### æ·»åŠ æ„å»ºéªŒè¯
```yaml
- name: éªŒè¯æ„å»ºæ–‡ä»¶
  run: npm run verify:build
```

### **2. ä¼˜åŒ– Docker é…ç½®**

#### æ·»åŠ  .dockerignore
```dockerignore
# ç¡®ä¿åŒ…å«é‡è¦æ–‡ä»¶
!server.js
!package.json
!dnf_pvf_tutorial.html
!style.css
!pvfCourse/
!scripts/
```

#### å¢å¼º Dockerfile
```dockerfile
# å®‰è£… curl ç”¨äºå¥åº·æ£€æŸ¥
RUN apk add --no-cache curl

# æ·»åŠ å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:3000/ || exit 1
```

### **3. åˆ›å»ºéªŒè¯è„šæœ¬**

#### æ„å»ºéªŒè¯è„šæœ¬
```bash
npm run verify:build
```

éªŒè¯å†…å®¹ï¼š
- âœ… å¿…éœ€æ–‡ä»¶å­˜åœ¨
- âœ… æ ·å¼æ–‡ä»¶åŒ…å«æ–°åŠŸèƒ½
- âœ… HTML åŒ…å«æ–°ç‰¹æ€§
- âœ… ç‰ˆæœ¬å·æ­£ç¡®

---

## ğŸš€ éƒ¨ç½²æµç¨‹

### **è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰**

1. **æäº¤ä»£ç **
```bash
git add .
git commit -m "fix: ä¿®å¤Dockeréƒ¨ç½²æ ·å¼é—®é¢˜"
git push origin master
```

2. **GitHub Actions è‡ªåŠ¨æ‰§è¡Œ**
- éªŒè¯æ„å»ºæ–‡ä»¶
- æ„å»º Docker é•œåƒ
- æ¨é€åˆ° Docker Hub
- æ ‡ç­¾ï¼š`latest`, `0.1.0`

### **æ‰‹åŠ¨éƒ¨ç½²ï¼ˆå¤‡ç”¨ï¼‰**

1. **æœ¬åœ°æ„å»ºé•œåƒ**
```bash
docker build -t your-username/dnf-pvf-tutorial:0.1.0 .
```

2. **æ¨é€åˆ° Docker Hub**
```bash
docker push your-username/dnf-pvf-tutorial:0.1.0
docker tag your-username/dnf-pvf-tutorial:0.1.0 your-username/dnf-pvf-tutorial:latest
docker push your-username/dnf-pvf-tutorial:latest
```

3. **æœåŠ¡å™¨éƒ¨ç½²**
```bash
# åœæ­¢æ—§å®¹å™¨
docker stop dnf-pvf-tutorial
docker rm dnf-pvf-tutorial

# æ‹‰å–æœ€æ–°é•œåƒ
docker pull your-username/dnf-pvf-tutorial:latest

# å¯åŠ¨æ–°å®¹å™¨
docker run -d --name dnf-pvf-tutorial -p 3000:3000 your-username/dnf-pvf-tutorial:latest
```

---

## ğŸ” é—®é¢˜è¯Šæ–­

### **æ£€æŸ¥é•œåƒç‰ˆæœ¬**
```bash
# æŸ¥çœ‹é•œåƒæ ‡ç­¾
docker images your-username/dnf-pvf-tutorial

# æ£€æŸ¥å®¹å™¨ä¿¡æ¯
docker inspect dnf-pvf-tutorial
```

### **éªŒè¯æ–‡ä»¶å†…å®¹**
```bash
# è¿›å…¥å®¹å™¨æ£€æŸ¥æ–‡ä»¶
docker exec -it dnf-pvf-tutorial sh

# æ£€æŸ¥æ ·å¼æ–‡ä»¶
cat style.css | grep "padding-left: 1.5rem"
cat style.css | grep "content: 'ğŸ“'"

# æ£€æŸ¥ HTML æ–‡ä»¶
cat dnf_pvf_tutorial.html | grep "expandedFolders"
```

### **æ£€æŸ¥ç½‘ç»œè®¿é—®**
```bash
# æµ‹è¯•æ ·å¼æ–‡ä»¶è®¿é—®
curl http://your-server:3000/style.css

# æµ‹è¯•ä¸»é¡µé¢
curl http://your-server:3000/
```

---

## ğŸ¯ éªŒè¯æ¸…å•

### **éƒ¨ç½²å‰éªŒè¯**
- [ ] æœ¬åœ°è¿è¡Œ `npm run verify:build` é€šè¿‡
- [ ] æœ¬åœ° Docker æ„å»ºæˆåŠŸ
- [ ] æ ·å¼æ–‡ä»¶åŒ…å«æ–°åŠŸèƒ½
- [ ] ç‰ˆæœ¬å·ä¸º 0.1.0

### **éƒ¨ç½²åéªŒè¯**
- [ ] å®¹å™¨å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] æ ·å¼æ–‡ä»¶å¯ä»¥è®¿é—®
- [ ] æ–‡ä»¶æ ‘å±‚çº§æ˜¾ç¤ºæ­£ç¡®
- [ ] é¢åŒ…å±‘å¯¼èˆªåŠŸèƒ½æ­£å¸¸
- [ ] å›¾æ ‡å’ŒåŠ¨ç”»æ•ˆæœæ­£å¸¸

---

## ğŸš¨ å¸¸è§é—®é¢˜

### **Q1: æ ·å¼ä»ç„¶ä¸æ˜¾ç¤º**
**A**: æ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ï¼Œå¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+F5ï¼‰

### **Q2: é•œåƒç‰ˆæœ¬æ²¡æœ‰æ›´æ–°**
**A**: 
```bash
# å¼ºåˆ¶æ‹‰å–æœ€æ–°é•œåƒ
docker pull your-username/dnf-pvf-tutorial:latest --no-cache

# æˆ–è€…ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬
docker pull your-username/dnf-pvf-tutorial:0.1.0
```

### **Q3: GitHub Actions æ„å»ºå¤±è´¥**
**A**: æ£€æŸ¥ Actions æ—¥å¿—ï¼Œç¡®ä¿ï¼š
- éªŒè¯è„šæœ¬é€šè¿‡
- Docker ç™»å½•æˆåŠŸ
- æ¨é€æƒé™æ­£ç¡®

### **Q4: å®¹å™¨å¯åŠ¨å¤±è´¥**
**A**: æ£€æŸ¥å®¹å™¨æ—¥å¿—
```bash
docker logs dnf-pvf-tutorial
```

---

## ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”

| æ–¹é¢ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| ç‰ˆæœ¬ç®¡ç† | âŒ ç‰ˆæœ¬ä¸åŒ¹é… | âœ… ç‰ˆæœ¬åŒæ­¥ |
| æ„å»ºéªŒè¯ | âŒ æ— éªŒè¯ | âœ… è‡ªåŠ¨éªŒè¯ |
| å¥åº·æ£€æŸ¥ | âŒ æ— æ£€æŸ¥ | âœ… è‡ªåŠ¨æ£€æŸ¥ |
| é—®é¢˜è¯Šæ–­ | âŒ éš¾ä»¥æ’æŸ¥ | âœ… å®Œæ•´å·¥å…· |
| éƒ¨ç½²å¯é æ€§ | âš ï¸ ä¸ç¨³å®š | âœ… å¯é ç¨³å®š |

---

## ğŸ‰ é¢„æœŸç»“æœ

ä¿®å¤åï¼ŒDocker éƒ¨ç½²åº”è¯¥æ˜¾ç¤ºï¼š

### **æ–‡ä»¶æ ‘æ ·å¼**
- âœ… æ¸…æ™°çš„å±‚çº§ç¼©è¿›ï¼ˆæ¯çº§ 24pxï¼‰
- âœ… æ–‡ä»¶å¤¹å›¾æ ‡ï¼šğŸ“ï¼ˆæŠ˜å ï¼‰ğŸ“‚ï¼ˆå±•å¼€ï¼‰
- âœ… æ–‡ä»¶å›¾æ ‡ï¼šğŸ“„ï¼ˆæ™®é€šï¼‰ğŸ“–ï¼ˆå½“å‰ï¼‰
- âœ… è¿æ¥çº¿æ˜¾ç¤ºå±‚çº§å…³ç³»
- âœ… æ‚¬åœæ•ˆæœå’ŒåŠ¨ç”»

### **åŠŸèƒ½ç‰¹æ€§**
- âœ… æ–‡ä»¶æ ‘é»˜è®¤æŠ˜å 
- âœ… é¢åŒ…å±‘å¯¼èˆªç‚¹å‡»è·³è½¬
- âœ… çŠ¶æ€è®°å¿†å’Œé‡ç½®åŠŸèƒ½
- âœ… éšç§æ¨¡å¼å…¼å®¹

---

## ğŸ“ æ”¯æŒ

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·ï¼š

1. **æ”¶é›†ä¿¡æ¯**ï¼š
   - Docker ç‰ˆæœ¬
   - é•œåƒæ ‡ç­¾
   - å®¹å™¨æ—¥å¿—
   - æµè§ˆå™¨å¼€å‘è€…å·¥å…·æˆªå›¾

2. **æäº¤ Issue**ï¼š
   - GitHub: https://github.com/springandme/dnf-pvf-tutorial/issues
   - åŒ…å«è¯¦ç»†çš„ç¯å¢ƒä¿¡æ¯å’Œé”™è¯¯æ—¥å¿—

é€šè¿‡è¿™äº›ä¿®å¤æªæ–½ï¼ŒDocker éƒ¨ç½²åº”è¯¥èƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰æ ·å¼å’ŒåŠŸèƒ½ï¼ğŸ¨âœ¨
