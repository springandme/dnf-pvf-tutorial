{
    "content": "<p>来台服吧学到了很多东西 也自己钻研了很多东西 现在来写点东西回馈贴吧 让喜欢diy的小白少走弯路吧</p>\n\n<p><br />\n鉴于台服吧没找到什么好的做地图教程 本人通过一些b站视频的学习 和大量自己研究得来的经验 虽然有很多问题没搞清楚 但是用来撰写这篇做地图教程的经验已是绰绰有余 学习这个教程请囫囵吞枣不求甚解 不要钻牛角尖 过程不重要 结果才重要 有什么不对的地方欢迎指出探讨</p>\n\n<p>本套教程将教会你简单地图的制作，效果如下，以下为两张本人自制的地图</p>\n\n<p>诸神之殿<a href=\"http://jump2.bdimg.com/safecheck/index?url=rN3wPs8te/pL4AOY0zAwhxlM0gIy4aw6IqIox4G1IDB2g5Oufqc14HSGB5tVIezbZ4p1CyPoVREhECE3Aj+1S7QWFrd5N5bM5Itiyh13SviSD5fbKQvzcy6yVifqjJrzk4Sezw4pPhmeX+pm0FJ4RXzLUUIqb0dsS1B37YO8RlmNqPUgE6vjXQWJhbSa0zPLqT+uqTNCOHCo4qG4f1Mbhinw6lfbxJtFpzpdtN5vbjmyWbZRDWwM3Sl5YUuCdTTQk9iyTuCb7v8+Uv7nDSQV+3Y9qHh6BM0y\" rel=\"noopener noreferrer nofollow\" target=\"_blank\">https://www.bilibili.com/video/BV1dT4y1C7pP?spm_id_from=333.999.0.0&amp;vd_source=e5d4900e2b33b3c7ce0f7202371317fa</a></p>\n\n<p>落日<a href=\"http://jump2.bdimg.com/safecheck/index?url=rN3wPs8te/pL4AOY0zAwhxlM0gIy4aw6IqIox4G1IDB2g5Oufqc14HUg3VUQqSDBqEUh5TbjWspHcm/DQfUPd7QWFrd5N5bM5Itiyh13SviSD5fbKQvzc+h6PTjFEyezqOKhuH9TG4Yp8OpX28SbRac6XbTeb245slm2UQ1sDN0peWFLgnU00JPYsk7gm+7/PlL+5w0kFft2Pah4egTNMg==\" rel=\"noopener noreferrer nofollow\" target=\"_blank\">https://www.bilibili.com/video/BV1Fm4y1f7iW?spm_id_from=333.999.0.0</a></p>\n\n<p>简单记忆下这个概念 地图可以里面有若干房间。每个房间里面有地板，背景，怪物，obj对象（比如可以摧毁的箱子，比如树精丛林地上的藤曼）我们先写地图 再写地图里的房间 最后再装修每个房间 然后再在房间里添加怪物 然后再把地图接口添加到比如天空之城 斯顿雪域里面让它能选图 然后完成了自己diy</p>\n\n<p>1.首先在dungeon里创建地图.dgn文件</p>\n\n<p><img alt=\"\" height=\"444\" src=\"/media/uploads/2023/07/16/image-20230716114214-1.png\" width=\"862\" /><br />\n<br />\n然后在dungenon下的dungeon.lst文件里把这个地图添加进路径 可以理解为告诉服务器 &ldquo;文件里面有这个编号为3068的地图&rdquo;<br />\n同理你也可以找到王的遗迹对应的地图和编号<br />\n<img alt=\"\" height=\"515\" src=\"/media/uploads/2023/07/16/image-20230716113707-2.png\" width=\"800\" /><br />\n<br />\n这个3068是地图id 你可以随便取 只要在lst里不重复即可<br />\n然后我们来简单编写一下my_map01.dgn文件<br />\n建议直接抄 这里打开王的遗迹.dgn文件来做模板<br />\n<br />\n<br />\n<img alt=\"\" height=\"541\" src=\"/media/uploads/2023/07/16/image-20230716113734-3.png\" width=\"800\" /><br />\n<br />\n把里面的内容全部复制到my_map01.dgn里<br />\n<img alt=\"\" height=\"525\" src=\"/media/uploads/2023/07/16/image-20230716113800-4.png\" width=\"800\" /><br />\n<br />\n这里复制好以后是这样的<br />\n<img alt=\"\" height=\"459\" src=\"/media/uploads/2023/07/16/image-20230716113817-5.png\" width=\"800\" /><br />\n<br />\n一个地图可以简单理解为是由地板 背景组成 所以这个<br />\n<img alt=\"\" height=\"460\" src=\"/media/uploads/2023/07/16/image-20230716113837-6.png\" width=\"364\" /><br />\n<br />\ntitle文件夹里的ani文件不能少 我理解为是用来加载地板的 建议按我的方法做地图都用王的遗迹来做模板<br />\n<br />\n<br />\n右键 新建空白文件<br />\n<img alt=\"\" height=\"249\" src=\"/media/uploads/2023/07/16/image-20230716113850-7.png\" width=\"709\" /><br />\n<br />\n建好以后kkk.ani里是空白的 我们去抄代码<br />\n<img alt=\"\" height=\"587\" src=\"/media/uploads/2023/07/16/image-20230716113908-8.png\" width=\"404\" /></p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" height=\"637\" src=\"/media/uploads/2023/07/16/image-20230716113918-9.png\" width=\"800\" /><br />\n<br />\n然后这个[entering title]词条改成这样 让它们对应上 看到这里各位应该可以推断出路径和文件所在的联系 (对了 左边文件目录下 所有文件名称字母都是小写)</p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" height=\"459\" src=\"/media/uploads/2023/07/16/image-20230716113932-10.png\" width=\"800\" /></p>\n\n<p>&nbsp;</p>\n\n<p>2.介绍如何在ImagePacks2文件（以下简称img2）里找到pvf词条对应贴图文件<br />\n一步一步跟着来 做一次你就会了 不要嫌麻烦</p>\n\n<p>首先打开这个工具准备<br />\n<img alt=\"\" height=\"362\" src=\"/media/uploads/2023/07/16/image-20230716113952-11.png\" width=\"560\" /><br />\n<br />\n<br />\n比如你要在Imag2文件夹里找到这个路径对应的贴图<br />\n<br />\n<img alt=\"\" height=\"630\" src=\"/media/uploads/2023/07/16/image-20230716114838-2.png\" width=\"800\" /><br />\n<br />\n<br />\n打开dnf客户端目录进入img2文件<br />\n<img alt=\"\" height=\"512\" src=\"/media/uploads/2023/07/16/image-20230716114854-3.png\" width=\"600\" /><br />\n<br />\npvf里的路径是这样的Map/CutScene/UnderFoot.img-&gt;0<br />\n你可以拿里面的关键字 比如CutScene这个单词来搜索<br />\n可以看到出来了几个<br />\n<img alt=\"\" height=\"438\" src=\"/media/uploads/2023/07/16/image-20230716114904-4.png\" width=\"800\" /><br />\n<br />\n<br />\n<br />\n画红圈哪个应该就是所在(别问为什么 就是经验 你做多了细细想想应该也是这样)<br />\n然后把这个后缀npk文件拖入恋恋</p>\n\n<p><br />\n不知道具体是哪个可以都拖进恋恋看看</p>\n\n<p>2022-9-12&nbsp;16:36<a href=\"https://tieba.baidu.com/p/8017455591#\" rel=\"noopener\">回复</a><a href=\"https://tieba.baidu.com/home/main?id=tb.1.19d52d8f.QLjjfM9DPebb287Bm51B7A&amp;ie=utf-8&amp;fr=pb\" target=\"_blank\">Soul暗瞳</a>:&nbsp;推荐PVFUtility2022或剑圣工具查找NPK/IMG，不然碰到自定义npk名字的你就傻眼了。</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" height=\"330\" src=\"/media/uploads/2023/07/16/image-20230716114946-5.png\" width=\"800\" /><br />\n<br />\n你会看到有很多img文件<br />\n<img alt=\"\" height=\"635\" src=\"/media/uploads/2023/07/16/image-20230716115006-6.png\" width=\"800\" /><br />\n<br />\n我们在里面找这个img文件<br />\n<img alt=\"\" height=\"94\" src=\"/media/uploads/2023/07/16/image-20230716115017-7.png\" width=\"446\" /><br />\n<br />\n看 突然明白了吧 这个词条意思就是进图页面 显示的贴图</p>\n\n<p><img alt=\"\" height=\"705\" src=\"/media/uploads/2023/07/16/image-20230716115032-8.png\" width=\"800\" /></p>\n\n<p>这个贴图大家都很熟悉了吧 ，那为什么是这个贴图呢？因为my_map01.dgn里的代码是抄王的遗迹 。<br />\n这个贴图是第0帧<br />\n<br />\n<br />\n<img alt=\"\" height=\"79\" src=\"/media/uploads/2023/07/16/image-20230716115052-9.png\" width=\"442\" /><br />\n<br />\n词条里指向的也是第0帧<br />\n所以大家现在可以大致清楚img2文件里的npk里的img文件是如何与pvf中的路径关联起来了 所以你要修改某个地图的进场贴图 思路就是找到这个地图的dgn文件 然后通过[cutscene image]词条下的路径在img2文件夹里找到对应npk文件 再在npk里找到路径里指向的img文件里对应的帧 这个帧就是你要改的贴图</p>\n\n<p>其他贴图都是类似找法</p>\n\n<p>3.dgn文件里一些词条的解释<br />\n[worldmap pattern info]<br />\n就是选图时候的小地图<br />\n<img alt=\"\" height=\"601\" src=\"/media/uploads/2023/07/16/image-20230716115116-10.png\" width=\"800\" /><br />\n<br />\n下面解释了my_map01.dgn里面的各个词条<br />\n<img alt=\"\" height=\"2735\" src=\"/media/uploads/2023/07/16/1.jpg\" width=\"800\" /></p>\n\n<p><br />\n王的遗迹里有6个房间小地图显示大概是这样 各位都记得<br />\n<img alt=\"\" height=\"92\" src=\"/media/uploads/2023/07/16/image-20230716115212-11.png\" width=\"173\" /><br />\n<br />\n最右边房间的是玩家出生的房间 它的坐标是(5,0) 这个房间有一个左边的门对应的[greed] 是EE ,<br />\n再往左走第二个图坐标是(4,0) 这个房间有一个左边和一个右边，一共两个门对应的[greed] 是FF，<br />\n再往左走第三个图坐标是(3,0) 这个房间有一个左边和一个右边，一共两个门对应的[greed] 是FF，<br />\n再往左走第四个图坐标是(2,0) 这个房间有一个左边和一个右边，一共两个门对应的[greed] 是FF，<br />\n再往左走第五个图坐标是(1,0) 这个房间有一个左边和一个右边，一共两个门对应的[greed] 是FF，<br />\n再往左走第六个图是BOSS图坐标是(0,0) 这个房间右边有一个门对应的[greed] 是BB。 讲到这里<br />\n[greed]标签大概理解了吧 大概理解就行 看本教程请囫囵吞枣</p>\n\n<p>&nbsp;</p>\n\n<p>对了 说一个简单操作 这样省的各种开关文件夹</p>\n\n<p><img alt=\"\" height=\"599\" src=\"/media/uploads/2023/07/16/image-20230716115309-12.png\" width=\"950\" /></p>\n\n<p>书接上回 dungeon/my_map/my_map01.dgn里的词条写好以后 为了减轻各位的压力 我对里面的内容做一些小修改 各位先跟着我一步一步做 做完会明白<br />\n首先找到以下词条</p>\n\n<p><img alt=\"\" height=\"385\" src=\"/media/uploads/2023/07/16/image-20230716115337-13.png\" width=\"800\" /></p>\n\n<p><br />\n然后做如下修改 (词条的含义在前几楼大致解释过 就不再赘述了)<br />\n(红色做笔记的地方可以看看 方便对前面所讲内容的理解)</p>\n\n<p><img alt=\"\" height=\"464\" src=\"/media/uploads/2023/07/16/image-20230716115407-14.png\" width=\"1200\" /></p>\n\n<p>上面的操作简单来讲就是 把my_map01.dgn这个文件修改得只剩下两个地图 初始位置（风骑士）往左走直接到波罗丁</p>\n\n<ul>\n\t<li><a href=\"https://tieba.baidu.com/home/main?id=tb.1.966779ad.yyMZnq1bBxxPU7Sa1FGwdQ&amp;ie=utf-8&amp;fr=pb\" target=\"_blank\">Cookie</a>&nbsp;是光骑士 打错了\n\n\t<p>2022-9-13&nbsp;14:27<a href=\"https://tieba.baidu.com/p/8017455591#\" rel=\"noopener\">回复</a></p>\n\t</li>\n\t<li>\n\t<p><a href=\"https://tieba.baidu.com/home/main?id=tb.1.966779ad.yyMZnq1bBxxPU7Sa1FGwdQ&amp;ie=utf-8&amp;fr=pb\" target=\"_blank\">Cookie</a>:&nbsp;哦哦 是4801房间是风骑士</p>\n\t</li>\n</ul>\n\n<p>可以看到现在my_map01.dgn里只能索引到4801和4806两个房间了</p>\n\n<p><img alt=\"\" height=\"657\" src=\"/media/uploads/2023/07/16/image-20230716115517-15.png\" width=\"431\" /></p>\n\n<p>为方便区分 我们把这个自定义地图改改名字</p>\n\n<p><img alt=\"\" height=\"451\" src=\"/media/uploads/2023/07/16/image-20230716115531-16.png\" width=\"800\" /></p>\n\n<p>如图</p>\n\n<p><img alt=\"\" height=\"177\" src=\"/media/uploads/2023/07/16/image-20230716115603-17.png\" width=\"733\" /></p>\n\n<p>改好以后点快速保存</p>\n\n<p><img alt=\"\" height=\"107\" src=\"/media/uploads/2023/07/16/image-20230716115615-18.png\" width=\"338\" /></p>\n\n<p>可以看到已经变了</p>\n\n<p><img alt=\"\" height=\"416\" src=\"/media/uploads/2023/07/16/image-20230716115629-19.png\" width=\"800\" /></p>\n\n<p>再在右边搜索目录添加一些文件搜索 方便讲装修房间的时候用</p>\n\n<p><img alt=\"\" height=\"450\" src=\"/media/uploads/2023/07/16/image-20230716115655-20.png\" width=\"800\" /></p>\n\n<p>接下来我打算让大家先进这个自己做的地图去瞧瞧 装修房间先放一放 做了这么多步骤了 先进图看看再说<br />\n<br />\n<br />\n添加地图只需要看 副本接口 这个地方</p>\n\n<p><img alt=\"\" height=\"255\" src=\"/media/uploads/2023/07/16/image-20230716115715-21.png\" width=\"327\" /></p>\n\n<p>我们就把这个 用王的遗迹改的 &ldquo;我的第一个地图&rdquo; 放到暗黑城吧<br />\n打开worldmap 找到underfoot.wdm(暗黑城) 添加到右边搜索<br />\n打开worldmap/ui 找到underfoot.ui 添加到右边搜索(这个是暗黑城对应的选图ui)<br />\n做好以后如图</p>\n\n<p><img alt=\"\" height=\"428\" src=\"/media/uploads/2023/07/16/image-20230716115733-22.png\" width=\"800\" /></p>\n\n<p>接下来点开underfoot.wdm(暗黑城) 找到这个词条</p>\n\n<p><img alt=\"\" height=\"423\" src=\"/media/uploads/2023/07/16/image-20230716115754-23.png\" width=\"800\" /></p>\n\n<p>我们知道my_map01.dgn文件那时候我们自定义的ID是3068</p>\n\n<p><img alt=\"\" height=\"477\" src=\"/media/uploads/2023/07/16/image-20230716115813-24.png\" width=\"738\" /></p>\n\n<p>然后我们添加进去 加好如图</p>\n\n<p><img alt=\"\" height=\"202\" src=\"/media/uploads/2023/07/16/image-20230716115827-25.png\" width=\"265\" /></p>\n\n<p>然后点开worldmap/ui/underfoot.ui 拉到最底</p>\n\n<p><img alt=\"\" height=\"518\" src=\"/media/uploads/2023/07/16/image-20230716115839-26.png\" width=\"800\" /></p>\n\n<p>&nbsp;</p>\n\n<p><a href=\"https://tieba.baidu.com/home/main?id=tb.1.966779ad.yyMZnq1bBxxPU7Sa1FGwdQ&amp;ie=utf-8&amp;fr=pb\" target=\"_blank\">Cookie</a>:&nbsp;解释一下，这个underfoot.ui文件是写选图页面的 underfoot.wdm(暗黑城)和underfoot.ui是相对应的</p>\n\n<p>我们把这个复制一份</p>\n\n<p><img alt=\"\" height=\"565\" src=\"/media/uploads/2023/07/16/image-20230716115913-27.png\" width=\"800\" /></p>\n\n<p>粘贴</p>\n\n<p><img alt=\"\" height=\"598\" src=\"/media/uploads/2023/07/16/image-20230716115926-28.png\" width=\"800\" /></p>\n\n<p>我解释一些这个ui 每个对应一个地图的选图界面</p>\n\n<p><img alt=\"\" height=\"501\" src=\"/media/uploads/2023/07/16/image-20230716115942-29.png\" width=\"800\" /></p>\n\n<p><img alt=\"\" height=\"195\" src=\"/media/uploads/2023/07/16/image-20230716115957-30.png\" width=\"620\" /></p>\n\n<p>对了 这个`IDC_WORLDMAP_BUTTON8`也要改 改成<br />\n`IDC_WORLDMAP_BUTTON9` 反正就是不要重复数字 延顺下去<br />\n可以看到是不一样的</p>\n\n<p><img alt=\"\" height=\"531\" src=\"/media/uploads/2023/07/16/image-20230716120015-31.png\" width=\"602\" /></p>\n\n<p>改完以后就是这样 我把坐标也改了一下 免得选图界面重叠 可以抄我的</p>\n\n<p><img alt=\"\" height=\"504\" src=\"/media/uploads/2023/07/16/image-20230716120033-32.png\" width=\"800\" /></p>\n\n<p>搞完这些操作记得保存 还有封装</p>\n\n<p><img alt=\"\" height=\"186\" src=\"/media/uploads/2023/07/16/image-20230716120051-33.png\" width=\"606\" /></p>\n\n<p>接下来我们把pvf上传服务器 然后重新跑五国上游戏</p>\n\n<p><img alt=\"\" height=\"516\" src=\"/media/uploads/2023/07/16/image-20230716120104-34.png\" width=\"800\" /></p>\n\n<p>遇到灰频道可以在吧里找找./run1大法</p>\n\n<p><img alt=\"\" height=\"342\" src=\"/media/uploads/2023/07/16/image-20230716120126-35.png\" width=\"800\" /></p>\n\n<p>看到地图有了</p>\n\n<p><img alt=\"\" height=\"515\" src=\"/media/uploads/2023/07/16/image-20230716120143-36.png\" width=\"539\" /></p>\n\n<p>里面有两个王的遗迹的封面 其中一个就是我们抄来的自定义地图</p>\n\n<p><img alt=\"\" height=\"515\" src=\"/media/uploads/2023/07/16/image-20230716120200-37.png\" width=\"800\" /></p>\n\n<p>但是进不去副本 为什么？ 突然发现因为房间所指向的副本接口没改 上面说到过 副本.dgn文件里有指向房间的代码 那么房间也有指向副本的代码</p>\n\n<p><img alt=\"\" height=\"269\" src=\"/media/uploads/2023/07/16/image-20230716120227-38.png\" width=\"800\" /></p>\n\n<p><br />\n上图需要注意的是 b4801.map和s4801.map都要改成3068 但是这会导致一个问题 那就是进真正的王的遗迹的时候进不了了 因为这个本来指向王的遗迹的房间（33） 指向了我们自己的副本（3068） 其实很好解决 只需要复制一份房间 然后在map里给它注册id就好了 复制的方法下次再讲吧 先这样改<br />\n<br />\n<br />\n接下来pvf上传服务器 重新跑5国(别说我坑你们 虽然简单 但是我自己研究的时候不知道跑了几十次五国了 现在一句话轻飘飘的告诉你们明白了 带你们踩一次坑 记得牢 免得跑一整天五国不知道问题所在) 接下来我们开游戏<br />\n发现已经进入了我们第一个自己做的图里</p>\n\n<p><img alt=\"\" height=\"603\" src=\"/media/uploads/2023/07/16/image-20230716120255-39.png\" width=\"800\" /></p>\n\n<p>仔细看小地图</p>\n\n<p><img alt=\"\" height=\"69\" src=\"/media/uploads/2023/07/16/image-20230716120311-40.png\" width=\"194\" /><img alt=\"\" height=\"64\" src=\"/media/uploads/2023/07/16/image-20230716120320-41.png\" width=\"187\" /></p>\n\n<p>是不是从1,0开始 到0,0结束<br />\n是不是对应了my_map01.dgn里这段代码</p>\n\n<p><img alt=\"\" height=\"355\" src=\"/media/uploads/2023/07/16/image-20230716120335-42.png\" width=\"271\" /></p>\n\n<p>那么到此 地图的添加 已经完成 只剩下房间的装修了</p>\n\n<p>&nbsp;</p>\n",
    "auth_users": "学院搬运工",
    "img": "https://dafstatic.oss-cn-beijing.aliyuncs.com/static/title/level4.gif",
    "create_at": "2023-07-16T12:09:15.263",
    "view_num": 1145
}