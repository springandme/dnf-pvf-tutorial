{
    "content": "<p><span style=\"font-size:14px\"><img alt=\"\" height=\"862\" src=\"/media/uploads/2023/06/05/image-20230605092204-1.png\" width=\"881\" /></span></p>\n\n<p><span style=\"font-size:14px\">第一步：town 提取以黑市和灰色坟墓为例：先提取 town 文件。讲一下如何提取，适用于任何 town。</span></p>\n\n<p><span style=\"font-size:14px\">首先必须需要提取的文件有 map、npc、town三个文件。这一步只需要确定 town 的代码然后去剑圣工具提取就行，剩下的就是等待提取。</span></p>\n\n<p><span style=\"font-size:14px\"><img alt=\"\" height=\"625\" src=\"/media/uploads/2023/06/05/image-20230605094934-3.png\" width=\"882\" /></span></p>\n\n<p><span style=\"font-size:14px\">正常来说提取完一个城镇以后会有框起来的几个文件夹和列表。这是黑市的 town 包含的东西。接着是提取灰色坟墓。一样的操作提取。还多了个 obj 文件，一样的提取完添加去重就行。</span></p>\n\n<p><span style=\"font-size:14px\"><img alt=\"\" height=\"214\" src=\"/media/uploads/2023/06/05/image-20230605094948-4.png\" width=\"878\" /></span></p>\n\n<p><span style=\"font-size:14px\">以为到这里就提取完了吗？不并没有。还有一个文件是工具提取不了的，这时候就需要我们手动提取了。</span></p>\n\n<p><span style=\"font-size:14px\"><img alt=\"\" height=\"714\" src=\"/media/uploads/2023/06/05/image-20230605095014-5.png\" width=\"896\" /></span></p>\n\n<p><span style=\"font-size:14px\">就是这个 region 文件，这里我们需要手动提取的有 rgn 区域文件（n 地图文件），minimap 里对应的文件（右上角小地图文件）。</span></p>\n\n<p><img alt=\"\" height=\"412\" src=\"/media/uploads/2023/06/05/image-20230605095049-6.png\" width=\"922\" /></p>\n\n<p><span style=\"font-size:14px\"><img alt=\"\" src=\"https://cdndoc.pcs.baidu.com/rest/2.0/docview/doc?datatype=pic&amp;dp_logid=135631418012773217&amp;expires=3h&amp;fid=1059157962-250528-945102663386496&amp;ipmd5=fc5ff73afa5722c6613f0073b5ab806f&amp;method=data&amp;nf=1&amp;object=714d1bec5v7b66fe153b213e412c132f&amp;rt=pr&amp;sign=FOTRE-DCb740ccc5511e5e8fedcff06b081203-Vxy%252FWz73nyu8vYI9Lf6tt%252BlvtGM%253D&amp;timestamp=1685892568&amp;uar=cc5e421ca0fc6f0defd997a13c477b16&amp;env=pc&amp;product=pan&amp;pagenum=4\" />到这里一个完整的地图就提取完了，现在说一下如何添加，首先是老一套的无脑导入，接着是列表去重，<span style=\"color:#e74c3c\">这里注意一下，town.lst 文件里的代码一定要按顺序填写。例如这样：一个接一个，不能跳数字也不能乱顺序，不然直接炸五国</span>。只有 town.lst特殊，其他的 lst没有这个硬性规定。</span></p>\n\n<p><img alt=\"\" height=\"384\" src=\"/media/uploads/2023/06/05/image-20230605095133-7.png\" width=\"757\" /></p>\n\n<p><span style=\"font-size:14px\">接着是我们手动提取 region 文件添加，这个正常添加不重复就行。我们来解读一下里面文件的词条含义：首先是 rgn 文件：</span></p>\n\n<p><img alt=\"\" height=\"399\" src=\"/media/uploads/2023/06/05/image-20230605095152-8.png\" width=\"686\" /></p>\n\n<p><span style=\"font-size:14px\"><img alt=\"\" src=\"https://cdndoc.pcs.baidu.com/rest/2.0/docview/doc?datatype=pic&amp;dp_logid=135631418012773217&amp;expires=3h&amp;fid=1059157962-250528-945102663386496&amp;ipmd5=fc5ff73afa5722c6613f0073b5ab806f&amp;method=data&amp;nf=1&amp;object=714d1bec5v7b66fe153b213e412c132f&amp;rt=pr&amp;sign=FOTRE-DCb740ccc5511e5e8fedcff06b081203-Vxy%252FWz73nyu8vYI9Lf6tt%252BlvtGM%253D&amp;timestamp=1685892568&amp;uar=cc5e421ca0fc6f0defd997a13c477b16&amp;env=pc&amp;product=pan&amp;pagenum=5\" />rgn 文件</span><img alt=\"\" height=\"104\" src=\"/media/uploads/2023/06/05/image-20230605095216-9.png\" width=\"176\" /><span style=\"font-size:14px\">城镇的 id，（22 号城镇、23 号城镇、25 号城镇公用同一个 N 地图和右上角小地图）。</span><img alt=\"\" height=\"83\" src=\"/media/uploads/2023/06/05/image-20230605095231-11.png\" width=\"159\" /><span style=\"font-size:14px\">（中文名字是啥不重要）</span><img alt=\"\" height=\"70\" src=\"/media/uploads/2023/06/05/image-20230605095240-12.png\" width=\"161\" /><span style=\"font-size:14px\">（英文名字是啥不重要）</span><img alt=\"\" height=\"83\" src=\"/media/uploads/2023/06/05/image-20230605095246-13.png\" width=\"312\" /><span style=\"font-size:14px\">（小地图）town 城镇 ID，要确保</span></p>\n\n<p><span style=\"font-size:14px\">A，ID 是正确的。</span></p>\n\n<p><span style=\"font-size:14px\">B，ID 在 town/town.lst是存在的。</span></p>\n\n<p><span style=\"font-size:14px\">然后是 mm 文件也就是小地图文件：</span></p>\n\n<p><img alt=\"\" height=\"526\" src=\"/media/uploads/2023/06/05/image-20230605095316-14.png\" width=\"725\" /></p>\n\n<p><img alt=\"\" height=\"243\" src=\"/media/uploads/2023/06/05/image-20230605095328-15.png\" width=\"231\" /><span style=\"font-size:14px\"><span style=\"color:#c0392b\">（index 22）是 22 号城镇，下面的 area 就是该城镇所属的 0-X 区域。</span>还有一些 npc 地址以及副本信息，这些都无关紧要，<span style=\"color:#c0392b\">重要的是将 town 的 index 要对应，具体看你的 town 列表代码给的是多少。</span>这个要改一致。不一致就会出现看不了 N 地图或者乱入。再简单说一下 mm 文件里的 world</span></p>\n\n<p><img alt=\"\" height=\"347\" src=\"/media/uploads/2023/06/05/image-20230605095530-16.png\" width=\"285\" /></p>\n\n<p><span style=\"font-size:14px\"><span style=\"color:#c0392b\">(index 49）副本接口代码(Level90 95)等级限制</span>。Index 的代码一样，改成你副本接口写的对应代码就行。当然，这里我们只有文件，还缺少 npk，工具能够提取相当大部分的 npk，但 region 涉及到的 npk 无法提取，我们该怎么办呢？这里可以用到老唐的预设软件，精简客户端的步骤都会吧？多的就不说了自己悟吧。顺便学习下如何精简客户端。到这里我们已经学习了如何提取和添加城镇。那么关键来了，城镇添加完成以后我们还需要改动些什么东西呢？</span></p>\n\n<p><span style=\"font-size:14px\">首先是两个地图之间的互相传送：以赛利亚房间和房间外区域为例。</span></p>\n\n<p><img alt=\"\" height=\"734\" src=\"/media/uploads/2023/06/05/image-20230605095646-17.png\" width=\"893\" /></p>\n\n<p><img alt=\"\" height=\"136\" src=\"/media/uploads/2023/06/05/image-20230605095656-18.png\" width=\"842\" /></p>\n\n<p><span style=\"font-size:14px\">这是黑市的 town 文件，灰色坟墓的内容大同小异。</span></p>\n\n<p><span style=\"font-size:14px\">我们接着看如何实现赛利亚房间和房间外的互相传送，我们找一下 0 好区域和 1 号区域对应的 map 文件。</span></p>\n\n<p><img alt=\"\" height=\"370\" src=\"/media/uploads/2023/06/05/image-20230605095928-19.png\" width=\"647\" /></p>\n\n<p><span style=\"font-size:14px\">`Town/common/Gate_BlackMarket.map`的具体路径是在 map 文件下面的 town 里面，任何城镇的地图都是去 map 文件夹下面找，不要傻傻的去 town 文件夹下面找</span></p>\n\n<p><img alt=\"\" height=\"526\" src=\"/media/uploads/2023/06/05/image-20230605095953-20.png\" width=\"857\" /></p>\n\n<p><img alt=\"\" height=\"625\" src=\"/media/uploads/2023/06/05/image-20230605100006-21.png\" width=\"819\" /></p>\n\n<p><span style=\"font-size:14px\">这就是两个区域的 map 文件了，这里我们需要注意的是</span></p>\n\n<p><span style=\"color:#c0392b\"><span style=\"font-size:14px\">[town movable area]</span></span></p>\n\n<p><span style=\"color:#e74c3c\"><span style=\"font-size:14px\">[/town movable area]</span></span></p>\n\n<p><span style=\"font-size:14px\">里面的内容。我们先看 0 号区域的：</span></p>\n\n<p><img alt=\"\" height=\"89\" src=\"/media/uploads/2023/06/05/image-20230605100051-22.png\" width=\"733\" /></p>\n\n<p><span style=\"font-size:14px\">6个数字为一组传送数据。如：</span></p>\n\n<p><span style=\"color:#e74c3c\"><span style=\"font-size:14px\">330（X 坐标）-&gt;324（Y 坐标）-&gt;289（X 最大范围）-&gt;24（Y 最大范围）-&gt;22（22 号城镇）-&gt;1（1号区域）</span></span></p>\n\n<p><span style=\"font-size:14px\">含义是在（330，324）这个位置传送到 22 号城镇的 1 号区域。1号区域&nbsp;</span></p>\n\n<p><span style=\"font-size:14px\">​​​​​​​我们再看 1 号区域的：</span></p>\n\n<p><img alt=\"\" height=\"118\" src=\"/media/uploads/2023/06/05/image-20230605100211-23.png\" width=\"865\" /></p>\n\n<p><span style=\"font-size:14px\">虚线处的位置就是传送到 22 号城镇 0 号区域的坐标。为什么两个区域之间要添加互相的代码呢？因为你只添加&ldquo;去&rdquo;的坐标会找不到&ldquo;回家&rdquo;的路，而且你还会在&ldquo;去&rdquo;的路上迷路，一般都是传送到人家门口左上角还不给动，这叫私闯民宅，犯法的懂吗？所以我们想要去某个区域就一定要在这两个区域的里的<span style=\"color:#e74c3c\">[town movable area]</span>添加相互的代码。</span></p>\n\n<p><span style=\"font-size:14px\">好了，去别的区域的代码写好了，现在问题来了，如果我想去别的地方呢？也是一样的，自己找个合适的位置确定好 XY 坐标 XY 范围后填你要去的城镇和区域就行。到这里就完事了吗？当然不，我们只是添加好了传送区域，但是我们怎么知道区域的位置在哪？有的人就会说了，XY 坐标就是具体位置啊。那有没有更直观的画面的提示呢？有的，我们给我们添加的传送区域添加一个小光圈。</span></p>\n\n<p><img alt=\"\" height=\"174\" src=\"/media/uploads/2023/06/05/image-20230605100249-24.png\" width=\"727\" /><span style=\"font-size:14px\">[animation]`Animation/gateall_02.ani``[bottom]`22003400[/animation]（在原有的下面新加进去就行）带 gate 字符的一般都是小光圈，具体的看你们提取的 town 里的是什么。2200（X 坐标），340（Y 坐标），0（固定格式）这里的 XY 坐标不一定和你填写的传送 XY 坐标一致，大致一样就行，毕竟是范围。</span></p>\n\n<p><span style=\"font-size:14px\">城镇到这里就大致讲完了，接下来讲一下副本的提取和添加。副本提去和城镇提取大致一样，需要注意的是副本接口是工具提取不了的，所以我们得像提取 rgn 文件那样去提取 worldmap 文件。</span></p>\n\n<p><span style=\"font-size:14px\">以黑市的哈林副本为例：还记得黑市 town 文件里的 2 号区域吗？</span></p>\n\n<p><img alt=\"\" height=\"258\" src=\"/media/uploads/2023/06/05/image-20230605100319-25.png\" width=\"616\" /></p>\n\n<p><img alt=\"\" height=\"650\" src=\"/media/uploads/2023/06/05/image-20230605100331-26.png\" width=\"888\" /></p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-size:14px\">所以我们需要提取的就是 wdm 文件，副本 ui 文件</span></p>\n\n<p><img alt=\"\" height=\"692\" src=\"/media/uploads/2023/06/05/image-20230605100354-27.png\" width=\"851\" /></p>\n\n<p><img alt=\"\" height=\"199\" src=\"/media/uploads/2023/06/05/image-20230605100402-28.png\" width=\"588\" /></p>\n\n<p><span style=\"color:#2980b9\"><span style=\"font-size:14px\">253-&gt;68-&gt;1中的（253，68）是副本坐标，用梦大的副本坐标图参考。</span></span></p>\n\n<p><span style=\"font-size:14px\">3-&gt;1&gt;2&gt;6011中的 6011 是副本代码。</span></p>\n\n<p><span style=\"color:#2980b9\"><span style=\"font-size:14px\">如果要添加新的副本就需要去副本接口里添加新的副本代码也就是 wdm 文件，添加后再到这个副本 ui 文件里添加副本坐标。不然就会出现副本不显示或者副本不存在的问题。</span></span></p>\n\n<p><span style=\"font-size:14px\">副本的提取和添加到这也就差不多了，</span></p>\n\n<p><span style=\"color:#e74c3c\"><span style=\"font-size:14px\">还有最重要的一点，提取的副本里面用搜索工具搜一下[NPC]词条，看看有没有你 npc.lst 里没有的 npc，如果没有就将这个 npc 代码删除，不然添加副本以后进图去到有该 npc 代码的房间就闪退。</span></span></p>\n\n<p><span style=\"font-size:14px\">我们再来捋一遍思路：用工具提取城镇和副本，手动提取需要的region 和 worldmap 以及里面涉及到的 rgn，mm；wdn，ui文件等。</span></p>\n\n<p><span style=\"font-size:14px\">城镇的 rgn 和 mm 的 town index 要对应，wdn 添加副本，ui添加副本坐标。城镇区域添加互传坐标与光圈。副本文件去除没有的 npc代码。大致就这些吧，想到的和遇到的后面再补。</span></p>\n\n<p><span style=\"font-size:14px\">如果遇到赛利亚房间没有 npc 的情况的话，检查一下你的赛利亚房间一般都是 0 号区域里的 NPC 代码和坐标位置。如：</span></p>\n\n<p><img alt=\"\" height=\"405\" src=\"/media/uploads/2023/06/05/image-20230605100644-29.png\" width=\"998\" /></p>\n\n<p><span style=\"color:#2980b9\"><span style=\"font-size:14px\">[guild agit entrance info]</span></span></p>\n\n<p><span style=\"color:#2980b9\"><span style=\"font-size:14px\">[/guild agit entrance info]</span></span></p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"color:#2980b9\">​​​​​​​<span style=\"font-size:14px\">[pvp channel limit npc]</span></span></p>\n\n<p><span style=\"color:#2980b9\"><span style=\"font-size:14px\">[/pvp channel limit npc]</span></span></p>\n\n<p><span style=\"font-size:14px\">这两串词条里面最好不带东西，用 pvf 文件内容搜索这两个词条，批处理删掉就行。害怕出问题就在批处理回去个空的俩</span></p>\n",
    "auth_users": "玲珑",
    "img": "https://dafstatic.oss-cn-beijing.aliyuncs.com/static/title/level6.gif",
    "create_at": "2023-06-04T23:32:28.538",
    "view_num": 1448
}