{
    "content": "<p>文件名：<code>atmagedashattack.nut</code><br />\n抱着一颗热情的心为比我还白的小白翻译下nut.<br />\n粗陋见解有不对的地方还请大佬多多指教。</p>\n\n<pre>\n<code class=\"language-javascript\">\n\n// 配置男法奔跑攻擊的效果.\nfunction onSetState_ATMageDashAttack(obj, state, datas, isResetTimer)\n{\nif (!obj)//無效則不再執行\nreturn;\n//定義局部變量 技能等級效果的值=取本角色的技能等級\nlocal skillLevel = obj.sq_GetSkillLevel(SKILL_ICE_ELEMENTAL_ATTACK);\n\n\n// 技能等級&gt;0.也就是如果沒學精通技能。或者是如果角色沒專職\nif (skillLevel &gt; 0)\n{\n//定義局部變量 按下技能鍵的效果=判斷是否按鍵被按下了技能鍵 參數（按鍵的編號，默認參數可無視）。先定義好才能用呀！才能if\nlocal isPress = sq_IsKeyDown(OPTION_HOTKEY_MOVE_UP, ENUM_SUBKEY_TYPE_ALL) || sq_IsKeyDown(OPTION_HOTKEY_MOVE_DOWN, ENUM_SUBKEY_TYPE_ALL);\n\n// 如果按下了技能鍵\nif(!isPress)\n//配置單純的移動信息 參數（0X軸，起始速度450，結束速度450，false不需要按停止鍵就會自動停止，摩擦力-500，角色不會根據摩擦力被反彈）\nobj.sq_SetStaticMoveInfo(0, 450, 450, false, -500, true);//Static靜止的，不變的\n\n// 應用基礎精通提升了攻擊力\nobj.applyBasicAttackUp(sq_GetCurrentAttackInfo(obj),obj.getState());\n//配置基礎精通后提升攻擊力的atk\nsq_SetCurrentAttackInfo(obj, sq_GetCurrentAttackInfo(obj));\n}\nelse//其他情況，應該是被打斷或者被破招的情況\n{\n//配置單純的移動信息 參數（0X軸，起始速度450，結束速度450，false不需要按停止鍵就會自動停止，摩擦力-500，角色不會根據摩擦力被反彈）\nobj.sq_SetStaticMoveInfo(0, 450, 450, false, -500, true);//這裏應該是被打斷破招了沒攻擊出來，所以只有移動沒有攻擊信息\n}\n}\n\n\n// 奔跑的關鍵幀觸發特效.\nfunction onKeyFrameFlag_ATMageDashAttack(obj, flagIndex)\n{\nif(!obj)//無效返回\nreturn false;//無效返回\nif (flagIndex == 1)//關鍵幀編號，也就是成功出發了特效。\n{\n// 如果是可控制的obj。比如控制發射的方向或者發射的角度等等\nif (obj.sq_IsMyControlObject())\n{\n// 先定義局部變量特效代碼為24261。這裏意思為無屬性魔法球代碼24261\nlocal passiveObjectIndex = 24261;\nlocal power = -25;//定義能量值为-25\n// 定義好攻擊時的技能等級為角色攻擊時的技能等級。定義技能等級=角色的技能等級。\nlocal skillLevel = sq_GetSkillLevel(obj, SKILL_ELEMENTAL_CHANGE);\n\n\n// 定義投擲的附加元素\nlocal element = obj.getThrowElement();\n\n// 附加屬性特效\nlocal appendage = obj.GetSquirrelAppendage(\"Character/ATMage/ElementalChange/ap_ATMage_Elemental_Change.nut\");\nif (!appendage || !appendage.isValid())//如果附加是無效的\nelement = ENUM_ELEMENT_NONE;//無屬性附加。如果上面附加無效成立則發射無屬性魔法球。\n\n\nif (element != ENUM_ELEMENT_NONE)//無元素附加就默認無屬性攻擊\n{\nif (element == ENUM_ELEMENT_FIRE)//如果获取的为火属性附加，则发射的魔法球代码为24262\npassiveObjectIndex = 24262;\nelse if (element == ENUM_ELEMENT_WATER)//如果获取的为水属性附加，则发射的魔法球代码为24263\npassiveObjectIndex = 24263;\nelse if (element == ENUM_ELEMENT_DARK)//如果获取的为暗属性附加，则发射的魔法球代码为24264\npassiveObjectIndex = 24264;\nelse if (element == ENUM_ELEMENT_LIGHT)//如果获取的为光属性附加，则发射的魔法球代码为24265\npassiveObjectIndex = 24265;\n}\nelse\n{\n//配置當前攻擊加成率\nsq_SetCurrentAttackBonusRate(sq_GetCurrentAttackInfo(obj),power);\n// 應用基礎精通提升了攻擊力\nobj.applyBasicAttackUp(sq_GetCurrentAttackInfo(obj),obj.getState());\n//能量=獲取當前攻擊百分比\npower = sq_GetCurrentAttackBonusRate(obj);\n}\n\nobj.sq_StartWrite();\nobj.sq_WriteWord(80);// 向po文件的receiveDate裏寫入2個字節數(80)\nobj.sq_WriteWord(power);// 向po文件的receiveDate裏寫入2個字節數（power）\nobj.sq_SendCreatePassiveObjectPacket(passiveObjectIndex, 0, 100, 1, 55);//創建特效（特效代碼，等級，坐標xyz）\n}\n}\n\n\nreturn true;//這句還不太明白是啥意思\n}\n</code></pre>\n\n<p><img alt=\"\" height=\"715\" src=\"/media/uploads/2023/06/18/1.png\" width=\"800\" /></p>\n\n<p><img alt=\"\" height=\"468\" src=\"/media/uploads/2023/06/18/2.png\" width=\"759\" /></p>\n\n<p><img alt=\"\" height=\"796\" src=\"/media/uploads/2023/06/18/3.png\" width=\"800\" /></p>\n\n<p>&nbsp;</p>\n",
    "auth_users": "旭旭姥姥",
    "img": "",
    "create_at": "2023-06-18T14:22:15.839",
    "view_num": 792
}